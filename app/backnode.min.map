{"version":3,"file":"backnode.min.js","sources":["backnode.js"],"names":["BackNode","iframe","this","file","document","contentDocument","editor","parent","baliseSearch","ckeditor","gitPath","fileSaved","prototype","explorer","pick","callback","notHide","$","show","cloudExplorer","data","window","resize","hide","save","serializer","XMLSerializer","content","serializeToString","write","backNode","indexOf","src","push","replace","location","host","bind","git","search","path","deployButton","on","showDeployWindow","deploy","showDeploySaved","get","name","attr","response","d","JSON","parse","state","initOnUrl","repoUrl","html","dropboxPath","getToken","access_token","removeClass","addClass","modal","deployKey","socket","io","connect","hostname","getDeployStatus","open","Date","now","deployJustGit","templateCB","length","i","hasOwnProperty","append","fileToDeploy","_this","each","checked","splice","files","code","className","tabDl","split","toWidth","Math","ceil","parseInt","css","editable","listEditableContent","flagEditable","iframeDocument","iframeWindow","contentWindow","key","tagName","click","editPicture","head","CKEDITOR","inlineAll","find","remove","keyb","unbind","removeAttr","instances","destroy","s","getElementsByTagName","innerHTML","removeChild","addCkeditor","script","createElement","body","appendChild","cleanCkeditor","cleanRessource","type","tabToRemove","nodeArray","l","node","href","index","parentNode","picture","popinpicture","alt","editingPicture","undefined","contentPopinpicture","URL","slideDown","e","preventDefault","val","slideUp","getList","list","concat","getListForSelector","bnTexts","bnImages","bnTemplates","bnRepeats","parents","size","console","warn","is","subTemplate","DOM","repeats","subRepeat","edit"],"mappings":"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"}