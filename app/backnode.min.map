{"version":3,"file":"backnode.min.js","sources":["backnode.js"],"names":["BackNode","iframe","this","file","document","contentDocument","editor","parent","baliseSearch","ckeditor","gitPath","fileSaved","prototype","explorer","pick","callback","notHide","$","show","cloudExplorer","data","window","resize","hide","save","serializer","XMLSerializer","content","serializeToString","write","backNode","indexOf","src","push","replace","location","host","bind","git","search","filePath","fileName","deployButton","path","on","showDeployWindow","deploy","showDeploySaved","dropboxPath","get","response","d","JSON","parse","html","removeClass","addClass","deployKey","socket","io","connect","hostname","getDeployStatus","getToken","modal","state","deployJustGit","templateCB","length","i","hasOwnProperty","append","access_token","open","Date","now","fileToDeploy","_this","each","checked","splice","name","files","code","className","tabDl","split","toWidth","Math","ceil","parseInt","css","editable","listEditableContent","flagEditable","iframeDocument","iframeWindow","contentWindow","key","tagName","click","editPicture","attr","head","CKEDITOR","inlineAll","find","remove","keyb","unbind","removeAttr","instances","destroy","s","getElementsByTagName","innerHTML","removeChild","addCkeditor","script","createElement","body","appendChild","cleanCkeditor","cleanRessource","type","tabToRemove","nodeArray","l","node","href","index","parentNode","picture","popinpicture","alt","editingPicture","undefined","contentPopinpicture","URL","slideDown","e","preventDefault","val","slideUp","getList","list","concat","getListForSelector","bnTexts","bnImages","bnTemplates","bnRepeats","parents","size","console","warn","is","subTemplate","DOM","repeats","subRepeat","edit"],"mappings":"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"}