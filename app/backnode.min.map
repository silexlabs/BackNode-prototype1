{"version":3,"file":"backnode.min.js","sources":["backnode.js"],"names":["BackNode","iframe","this","file","document","contentDocument","editor","parent","baliseSearch","ckeditor","gitPath","fileSaved","prototype","explorer","pick","callback","notHide","$","show","cloudExplorer","data","window","resize","hide","save","serializer","XMLSerializer","content","serializeToString","write","backNode","indexOf","src","push","replace","location","host","bind","git","search","filePath","fileName","deployButton","path","on","showDeployWindow","deploy","showDeploySaved","dropboxPath","get","response","d","JSON","parse","html","removeClass","addClass","deployKey","socket","io","connect","hostname","getDeployStatus","getToken","modal","state","deployJustGit","templateCB","length","i","hasOwnProperty","append","access_token","open","Date","now","fileToDeploy","_this","each","checked","splice","name","files","code","split","editable","listEditableContent","flagEditable","iframeDocument","iframeWindow","contentWindow","key","tagName","click","editPicture","attr","css","head","CKEDITOR","inlineAll","find","remove","keyb","unbind","removeAttr","instances","destroy","s","getElementsByTagName","innerHTML","removeChild","addCkeditor","script","createElement","body","appendChild","cleanCkeditor","cleanRessource","className","type","tabToRemove","nodeArray","l","node","href","index","parentNode","picture","popinpicture","alt","editingPicture","undefined","contentPopinpicture","URL","slideDown","e","preventDefault","val","slideUp","getList","list","concat","getListForSelector","bnTexts","bnImages","bnTemplates","bnRepeats","parents","size","console","warn","is","subTemplate","DOM","repeats","subRepeat","edit"],"mappings":"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"}